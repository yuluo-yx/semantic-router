# Example: Using generic categories with MMLU-Pro mapping
# This file demonstrates how to declare free-style categories and map them to
# MMLU-Pro categories expected by the classifier model.

bert_model:
  model_id: sentence-transformers/all-MiniLM-L12-v2
  threshold: 0.6
  use_cpu: true

classifier:
  category_model:
    model_id: "models/mom-domain-classifier"
    use_modernbert: true
    threshold: 0.6
    use_cpu: true
    category_mapping_path: "models/mom-domain-classifier/category_mapping.json"

# Define your generic categories and map them to MMLU-Pro categories.
# The classifier will translate predicted MMLU categories into these generic names.
# Categories now only contain metadata - routing logic is defined in decisions below.
categories:
  - name: tech
    mmlu_categories: ["computer science", "engineering"]
  - name: finance
    mmlu_categories: ["economics"]
  - name: politics  # If omitted, identity mapping applies when this name matches MMLU

# Decisions define routing logic by combining rules and model selection
decisions:
  - name: tech
    description: "Route technology-related queries"
    priority: 10
    rules:
      operator: "OR"
      conditions:
        - type: "domain"
          name: "tech"
    modelRefs:
      - model: phi4
  - name: finance
    description: "Route finance and economics queries"
    priority: 10
    rules:
      operator: "OR"
      conditions:
        - type: "domain"
          name: "finance"
    modelRefs:
      - model: gemma3:27b
  - name: politics
    description: "Route politics-related queries"
    priority: 10
    rules:
      operator: "OR"
      conditions:
        - type: "domain"
          name: "politics"
    modelRefs:
      - model: gemma3:27b

# A default model is recommended for fallback
default_model: mistral-small3.1
