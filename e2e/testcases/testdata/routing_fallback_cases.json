[
  {
    "name": "keyword-takes-priority-over-embedding",
    "description": "Keyword routing should take priority over embedding when both match",
    "query": "urgent: machine learning question",
    "keyword_match": "urgent_request",
    "embedding_match": "ai",
    "bert_match": null,
    "expected_category": "urgent_request",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["urgent_request"]
  },
  {
    "name": "keyword-takes-priority-over-bert",
    "description": "Keyword routing should take priority over BERT classification",
    "query": "urgent: solve this math problem",
    "keyword_match": "urgent_request",
    "embedding_match": null,
    "bert_match": "math",
    "expected_category": "urgent_request",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["urgent_request"]
  },
  {
    "name": "fallback-to-embedding-when-keyword-fails",
    "description": "Should fall back to embedding when keyword doesn't match",
    "query": "What is deep learning?",
    "keyword_match": null,
    "embedding_match": "ai",
    "bert_match": "computer_science",
    "expected_category": "ai",
    "expected_method": "embedding",
    "expected_confidence": 0.75,
    "matched_keywords": []
  },
  {
    "name": "embedding-takes-priority-over-bert",
    "description": "Embedding should take priority over BERT when both match",
    "query": "Explain neural networks and machine learning algorithms",
    "keyword_match": null,
    "embedding_match": "ai",
    "bert_match": "computer_science",
    "expected_category": "ai",
    "expected_method": "embedding",
    "expected_confidence": 0.8,
    "matched_keywords": []
  },
  {
    "name": "fallback-to-bert-when-keyword-embedding-fail",
    "description": "Should fall back to BERT when keyword and embedding don't match",
    "query": "What is the derivative of x squared?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "math",
    "expected_category": "math",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "bert-classification-only",
    "description": "Pure BERT classification when no keyword or embedding matches",
    "query": "How does photosynthesis work in plants?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "biology",
    "expected_category": "biology",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "multiple-keywords-urgent-sensitive",
    "description": "Multiple keyword matches should use highest priority rule",
    "query": "urgent: need to process SSN and credit card data",
    "keyword_match": "urgent_request",
    "embedding_match": null,
    "bert_match": null,
    "expected_category": "urgent_request",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["urgent_request"]
  },
  {
    "name": "complex-query-all-methods-match",
    "description": "When all methods match, keyword should win",
    "query": "urgent: explain machine learning for quantum physics applications",
    "keyword_match": "urgent_request",
    "embedding_match": "ai",
    "bert_match": "physics",
    "expected_category": "urgent_request",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["urgent_request"]
  },
  {
    "name": "embedding-high-confidence-beats-low-bert",
    "description": "High confidence embedding should be used over low confidence BERT",
    "query": "Artificial intelligence and neural network architectures",
    "keyword_match": null,
    "embedding_match": "ai",
    "bert_match": "computer_science",
    "expected_category": "ai",
    "expected_method": "embedding",
    "expected_confidence": 0.85,
    "matched_keywords": []
  },
  {
    "name": "bert-classification-chemistry",
    "description": "BERT classification for chemistry domain",
    "query": "What is the chemical formula for sulfuric acid?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "chemistry",
    "expected_category": "chemistry",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "keyword-nor-operator-excludes-spam",
    "description": "Keyword NOR operator should exclude spam patterns",
    "query": "buy now and get free money fast",
    "keyword_match": "exclude_spam",
    "embedding_match": null,
    "bert_match": null,
    "expected_category": "exclude_spam",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["exclude_spam"]
  },
  {
    "name": "regex-pattern-detection",
    "description": "Regex pattern matching in keyword rules",
    "query": "My email is user.name@domain.com",
    "keyword_match": "regex_pattern_match",
    "embedding_match": null,
    "bert_match": null,
    "expected_category": "regex_pattern_match",
    "expected_method": "keyword",
    "expected_confidence": 1.0,
    "matched_keywords": ["regex_pattern_match"]
  },
  {
    "name": "business-domain-bert-only",
    "description": "Business domain classification via BERT",
    "query": "What are the key principles of strategic management?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "business",
    "expected_category": "business",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "law-domain-bert-only",
    "description": "Law domain classification via BERT",
    "query": "What is the statute of limitations for civil cases?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "law",
    "expected_category": "law",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "psychology-domain-bert-only",
    "description": "Psychology domain classification via BERT",
    "query": "Explain cognitive dissonance theory",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "psychology",
    "expected_category": "psychology",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "fallback-chain-embedding-to-bert",
    "description": "Test fallback from embedding (low similarity) to BERT",
    "query": "What is the capital of France?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "other",
    "expected_category": "other",
    "expected_method": "bert",
    "expected_confidence": 0.5,
    "matched_keywords": []
  },
  {
    "name": "engineering-domain-bert",
    "description": "Engineering domain classification",
    "query": "How do you design a load-bearing beam structure?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "engineering",
    "expected_category": "engineering",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "economics-domain-bert",
    "description": "Economics domain classification",
    "query": "Explain supply and demand equilibrium",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "economics",
    "expected_category": "economics",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "history-domain-bert",
    "description": "History domain classification",
    "query": "What were the causes of World War II?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "history",
    "expected_category": "history",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  },
  {
    "name": "health-domain-bert",
    "description": "Health domain classification",
    "query": "What are the symptoms of type 2 diabetes?",
    "keyword_match": null,
    "embedding_match": null,
    "bert_match": "health",
    "expected_category": "health",
    "expected_method": "bert",
    "expected_confidence": 0.6,
    "matched_keywords": []
  }
]
