# Grafana configuration file for iframe embedding
# This file configures Grafana to allow embedding in the dashboard

[security]
# Allow embedding Grafana in iframes
allow_embedding = true

# Set cookie SameSite attribute to none to allow cross-origin requests in iframes
cookie_samesite = none

# Disable cookie secure flag for local development (set to true in production with HTTPS)
# Note: When cookie_samesite=none, cookie_secure should be true in production
cookie_secure = false

# Disable strict transport security for local development
strict_transport_security = false

[auth.anonymous]
# Enable anonymous access for iframe embedding
enabled = true

# Set the organization role for anonymous users to Admin for full access
org_role = Admin

# Set the home dashboard for anonymous users
# This ensures anonymous users land on the correct dashboard
org_name = Main Org.

[auth]
# Disable login form to allow anonymous access only
disable_login_form = true

[auth.basic]
# Disable basic authentication
enabled = false

[server]
# Configure root URL for proxy access
# CRITICAL: Use relative path /embedded/grafana/ so Grafana generates correct URLs
# The proxy strips /embedded/grafana prefix, so Grafana receives requests at /
# But Grafana needs to know its public URL is /embedded/grafana/ for generating links
root_url = /embedded/grafana/

# MUST be false because:
# - Proxy strips /embedded/grafana prefix before forwarding to Grafana
# - Grafana receives requests at / (not /embedded/grafana/)
# - But root_url tells Grafana to generate URLs with /embedded/grafana/ prefix
serve_from_sub_path = false

[users]
# Set default theme to dark
default_theme = dark

